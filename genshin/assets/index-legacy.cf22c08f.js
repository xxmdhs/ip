!function(){var e=document.createElement("style");e.innerHTML="._container_1omqz_2{width:100%;margin-right:auto;margin-left:auto}@media (min-width: 576px){._container_1omqz_2{max-width:510px;padding-right:0;padding-left:0}}@media (min-width: 768px){._container_1omqz_2{max-width:700px}}@media (min-width: 992px){._container_1omqz_2{max-width:920px}}@media (min-width: 1200px){._container_1omqz_2{max-width:1130px}}._headerText_1omqz_31{padding:1rem .5rem;font-size:20px;cursor:pointer}._header_1omqz_31{display:flex;justify-content:space-between;align-items:center;padding-right:1rem;padding-left:1rem}._column_1o6th_3{display:flex;flex-direction:column}._between_1o6th_13{display:flex;flex-direction:row;justify-content:space-between;align-items:flex-end}._n-card_1o6th_27{cursor:pointer;height:100%}._warp_1k16d_3{flex-wrap:wrap}\n",document.head.appendChild(e),System.register(["./vendor-legacy.68db9fdb.js"],(function(){"use strict";var e,t,a,l,n,o,r,i,s,u,c,d,p,m,h,v,_,f,y,g,w,x,k,b,z,T,$,C,S,q,N,M,j,I,U,E,K,A,L,R,O,B,F,H,J,P;return{setters:[function(D){e=D.d,t=D.c,a=D.w,l=D.u,n=D.N,o=D.a,r=D.o,i=D.b,s=D.e,u=D.n,c=D.f,d=D.g,p=D.R,m=D.K,h=D.r,v=D.h,_=D.i,f=D.j,y=D.k,g=D.F,w=D.l,x=D.m,k=D.t,b=D.p,z=D.q,T=D.s,$=D.v,C=D.x,S=D.y,q=D.z,N=D.A,M=D.B,j=D.C,I=D.D,U=D.E,E=D.G,K=D.H,A=D.I,L=D.J,R=D.L,O=D.M,B=D.O,F=D.P,H=D.Q,J=D.S,P=D.T}],execute:function(){var D={container:"_container_1omqz_2",headerText:"_headerText_1omqz_31",header:"_header_1omqz_31"},G=(e,t)=>{const a=e.__vccOpts||e;for(const[l,n]of t)a[l]=n;return a};const Q=e({setup(e){const f=o();return(e,o)=>(r(),t(l(n),null,{default:a((()=>[i(l(_),null,{default:a((()=>[i(l(s),{bordered:"",class:u(e.$style.header)},{default:a((()=>[c("strong",{class:u(e.$style.headerText),onClick:o[0]||(o[0]=e=>l(f).push("/"))},"原神官网新闻列表",2)])),_:1},8,["class"]),i(l(d),{class:u(e.$style.container),"content-style":"padding: 24px;"},{default:a((()=>[i(l(p),null,{default:a((({Component:e,route:a})=>[(r(),t(m,null,[a.meta.keepAlive?(r(),t(h(e),{key:0})):v("",!0)],1024)),a.meta.keepAlive?v("",!0):(r(),t(h(e),{key:0}))])),_:1})])),_:1},8,["class"])])),_:1})])),_:1}))}});var V=G(Q,[["__cssModules",{$style:D}]]);var W={column:"_column_1o6th_3",between:"_between_1o6th_13","n-card":"_n-card_1o6th_27"};const X=["src"],Y=$("官网查看");var Z=G(e({props:{card:null},setup(e){const n=e;function o(e){let t=[];for(let a of e)switch(a){case"11":t.push("新闻");break;case"12":t.push("公告");break;case"258":t.push("活动")}return t}return(e,s)=>(r(),t(l(w),{cols:"3","item-responsive":"",responsive:"screen","x-gap":12,"y-gap":8},{default:a((()=>[(r(!0),f(g,null,y(n.card,(({channelId:n,title:s,id:d,imgSrc:p,time:m})=>(r(),t(l(x),{span:"3 m:1",key:d},{default:a((()=>[i(l(T),{title:s,class:u(e.$style["n-card"]),onClick:e=>function(e,t){document.title=t,ge.push("/info/"+e)}(d,s)},{cover:a((()=>[c("img",{src:p||"https://ys.mihoyo.com/main/_nuxt/img/37207c1.jpg"},null,8,X)])),default:a((()=>[c("div",{class:u(e.$style.between)},[c("div",{class:u(e.$style.column)},[c("span",null,k(o(n).join(" ")),1),c("span",null,k(m),1)],2),i(l(b),{onClick:z((e=>{return t=`https://ys.mihoyo.com/main/news/detail/${d}`,void window.open(t,"_blank","noreferrer=yes");var t}),["stop"])},{default:a((()=>[Y])),_:2},1032,["onClick"])],2)])),_:2},1032,["title","class","onClick"])])),_:2},1024)))),128))])),_:1}))}}),[["__cssModules",{$style:W}]]);const ee="https://quiet-disk-7a77.xmdhs.workers.dev",te=`${ee}/https://ys.mihoyo.com/content/ysCn/getContentList?`;async function ae(e,t,a="10"){let l=new URLSearchParams;l.append("pageSize",e.toString()),l.append("pageNum",t.toString()),l.append("channelId",a);let n=await fetch(te+l.toString()),o=await n.json();if(0!==o.retcode)throw new Error(o.message);return o}let le=[];async function ne(e="10",t=!1){if(!t&&le.length>0)return le;let a=await ae(1e3,1,e),l=a.data.list,n=a.data.total,o=Math.ceil(n/1e3);for(let r=2;r<=o;r++){let t=await ae(1e3,r,e);l=l.concat(t.data.list)}return l.sort(((e,t)=>Number(t.id)-Number(e.id))),le=l,l}const oe=`${ee}/https://ys.mihoyo.com/main/news/detail/`,re=/src=\\"(.*?.mp4)\\"/;var ie={warp:"_warp_1k16d_3"};const se=$("数据加载中"),ue=c("span",null,"跳转",-1),ce=c("span",null,"跳转",-1),de=e({setup(e){const n=C(),o=S([]),s=S(1),d=S(1),p=S(!1);let m=[];const h=S(""),_=S();function y(){document.title="原神视频列表"}q(y),N(y);const w=S("");function x(){isNaN(Number(w.value))||Number(w.value)>d.value||(s.value=Number(w.value)),w.value=""}if(0==m.length){(async()=>{try{const e=await ne();for(const t of e)m.push({id:t.id,title:t.title,channelId:t.channelId,time:t.start_time,imgSrc:(e=>{let t="";return e.ext.forEach((e=>{var a;"banner"==e.arrtName&&(t=null==e||null===(a=e.value[0])||void 0===a?void 0:a.url)})),t})(t)});p.value=!0,o.value=m.slice(0,30),d.value=Math.ceil(m.length/30)||1}catch(e){n.error(String(e),{closable:!0,duration:0}),console.warn(e)}})();let e,t=[];M(s,(e=>{var a;let l=0==t.length?m:t;o.value=l.slice(30*(e-1),30*e),null===(a=_.value)||void 0===a||a.scrollIntoView({behavior:"smooth"})})),M(h,(a=>{if(""==(a=a.trim()))return t=[],o.value=m.slice(0,30),d.value=Math.ceil(m.length/30)||1,void(s.value=1);e&&clearTimeout(e),a&&(e=setTimeout((()=>{if(a!=h.value)return;let e;try{e=new RegExp(a,"i")}catch(l){return n.error(String(l),{closable:!0,duration:1500}),void console.warn(l)}t=m.filter((t=>e.test(t.title))),o.value=t.slice(0,30),d.value=Math.ceil(t.length/30)||1,s.value=1}),200))}))}return(e,n)=>(r(),f(g,null,[p.value?v("",!0):(r(),t(l(j),{key:0},{description:a((()=>[se])),default:a((()=>[i(l(U),{text:"",repeat:10})])),_:1})),p.value?(r(),t(l(I),{key:1,vertical:""},{default:a((()=>[i(l(E),{size:"medium",round:"",placeholder:"正则搜索",clearable:"",value:h.value,"onUpdate:value":n[0]||(n[0]=e=>h.value=e)},null,8,["value"]),c("div",{ref_key:"listTopRef",ref:_},null,512),i(l(I),{size:"small",align:"center"},{default:a((()=>[i(l(K),{page:s.value,"onUpdate:page":n[1]||(n[1]=e=>s.value=e),"page-count":d.value,class:u(e.$style.warp)},null,8,["page","page-count","class"]),ue,i(l(E),{value:w.value,"onUpdate:value":n[2]||(n[2]=e=>w.value=e),onKeyup:A(x,["enter"]),placeholder:"",autosize:"",style:{"min-width":"2em"}},null,8,["value","onKeyup"])])),_:1}),i(Z,{card:o.value},null,8,["card"]),i(l(I),{size:"small",align:"center"},{default:a((()=>[i(l(K),{page:s.value,"onUpdate:page":n[3]||(n[3]=e=>s.value=e),"page-count":d.value,class:u(e.$style.warp)},null,8,["page","page-count","class"]),ce,i(l(E),{value:w.value,"onUpdate:value":n[4]||(n[4]=e=>w.value=e),onKeyup:A(x,["enter"]),placeholder:"",autosize:"",style:{"min-width":"2em"}},null,8,["value","onKeyup"])])),_:1})])),_:1})):v("",!0)],64))}});var pe=G(de,[["__cssModules",{$style:ie}]]);const me=$("数据加载中"),he=$("返回列表"),ve=$("到米哈游官网查看"),_e=e({props:{id:null},setup(e){const n=e,s=o(),u=C(),d=S(!1),p=S(null),m=S(!0);return L((async()=>{try{let t=(await ne()).find((e=>e.id==n.id));t&&(document.title=t.title);let a=await async function(e){let t=await fetch(oe+e),a=await t.text(),l=re.exec(a);if(null===l)return"";let n='"'+l[1]+'"';return JSON.parse(n)}(n.id);if(""==a)return m.value=!1,void(d.value=!0);p.value&&(e=p.value,new F({container:e,video:{url:a}})),m.value=!1}catch(t){u.error(String(t),{closable:!0,duration:0}),console.log(t),m.value=!1}var e})),(e,o)=>(r(),f(g,null,[R(c("div",{id:"dplayer",ref_key:"dplayer",ref:p},null,512),[[O,!m.value]]),m.value?(r(),t(l(j),{key:0},{description:a((()=>[me])),default:a((()=>[i(l(U),{height:"30vh",width:"100%"})])),_:1})):v("",!0),d.value?(r(),t(l(B),{key:1,status:"warning",title:"警告",description:"此 id 没有视频"},{footer:a((()=>[i(l(I),{justify:"center"},{default:a((()=>[i(l(b),{onClick:o[0]||(o[0]=e=>l(s).go(-1))},{default:a((()=>[he])),_:1}),i(l(b),{onClick:o[1]||(o[1]=e=>{return t="https://ys.mihoyo.com/main/news/detail/"+n.id,void window.open(t,"_blank","noreferrer=yes");var t})},{default:a((()=>[ve])),_:1})])),_:1})])),_:1})):v("",!0)],64))}}),fe=$("返回上一页"),ye=[{path:"/",component:pe,meta:{keepAlive:!0}},{path:"/info/:id",component:_e,props:e=>({id:e.params.id}),meta:{scrollToTop:!0}},{path:"/:pathMatch(.*)*",name:"NotFound",component:e({setup(e){const n=o();return(e,o)=>(r(),t(l(B),{status:"404",title:"404 资源不存在",description:"啥都没有"},{footer:a((()=>[i(l(b),{onClick:o[0]||(o[0]=e=>l(n).back())},{default:a((()=>[fe])),_:1})])),_:1}))}}),meta:{scrollToTop:!0}}],ge=H({history:J(),scrollBehavior:(e,t,a)=>{if(a)return a;if(e.hash)return{el:e.hash,behavior:"smooth"};let l={left:0,top:0};return!!e.meta.scrollToTop&&(l.left=0,l.top=0,l)},routes:ye}),we=P(V);we.use(ge),we.mount("#app")}}}))}();
