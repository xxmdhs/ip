!function(){var e=document.createElement("style");e.innerHTML=".container[data-v-19f37417]{width:100%;margin-right:auto;margin-left:auto;padding:1rem}@media (min-width: 576px){.container[data-v-19f37417]{max-width:510px;padding-right:0;padding-left:0}}@media (min-width: 768px){.container[data-v-19f37417]{max-width:700px}}@media (min-width: 992px){.container[data-v-19f37417]{max-width:920px}}@media (min-width: 1200px){.container[data-v-19f37417]{max-width:1130px}}.n-card[data-v-6d3dd45b]{cursor:pointer;height:100%}.between[data-v-6d3dd45b]{display:flex;flex-direction:column;justify-content:space-between}.n-pagination{flex-wrap:wrap}\n",document.head.appendChild(e),System.register(["./vendor-legacy.88a90bbd.js"],(function(){"use strict";var e,t,a,n,l,i,r,o,u,c,d,s,p,v,h,m,f,g,w,y,x,k,_,b,S,j,C,I,T,N,M,q,A,E,z,L,O,U;return{setters:[function(B){e=B.d,t=B.c,a=B.a,n=B.w,l=B.u,i=B.N,r=B.o,o=B.R,u=B.b,c=B.r,d=B.e,s=B.K,p=B.f,v=B.F,h=B.g,m=B.h,f=B.i,g=B.t,w=B.j,y=B.k,x=B.l,k=B.m,_=B.n,b=B.p,S=B.q,j=B.s,C=B.v,I=B.x,T=B.y,N=B.z,M=B.A,q=B.B,A=B.C,E=B.D,z=B.E,L=B.G,O=B.H,U=B.I}],execute:function(){var B=(e,t)=>{const a=e.__vccOpts||e;for(const[n,l]of t)a[n]=l;return a};const H={class:"container"};var R=B(e({setup:e=>(e,p)=>(r(),t("div",H,[a(l(i),null,{default:n((()=>[a(l(o),null,{default:n((({Component:e,route:t})=>[(r(),u(s,null,[t.meta.keepAlive?(r(),u(c(e),{key:0})):d("",!0)],1024)),t.meta.keepAlive?d("",!0):(r(),u(c(e),{key:0}))])),_:1})])),_:1})]))}),[["__scopeId","data-v-19f37417"]]);const $=["src"],D={class:"between"};var F=B(e({props:{card:null},setup(e){const i=e;function o(e){let t=[];for(let a of e)switch(a){case"11":t.push("新闻");break;case"12":t.push("公告");break;case"258":t.push("活动")}return t}return(e,c)=>(r(),u(l(h),{cols:"3","item-responsive":"",responsive:"screen","x-gap":12,"y-gap":8},{default:n((()=>[(r(!0),t(v,null,p(i.card,(({channelId:e,title:t,id:i,imgSrc:c,time:d})=>(r(),u(l(m),{span:"3 m:1",key:i},{default:n((()=>[a(l(w),{title:t,class:"n-card",onClick:e=>function(e,t){document.title=t,te.push("/info/"+e)}(i,t)},{cover:n((()=>[f("img",{src:c||"https://ys.mihoyo.com/main/_nuxt/img/37207c1.jpg"},null,8,$)])),default:n((()=>[f("div",D,[f("span",null,g(o(e).join(" ")),1),f("span",null,g(d),1)])])),_:2},1032,["title","onClick"])])),_:2},1024)))),128))])),_:1}))}}),[["__scopeId","data-v-6d3dd45b"]]);const G="https://quiet-disk-7a77.xmdhs.workers.dev",J=`${G}/https://ys.mihoyo.com/content/ysCn/getContentList?`;async function K(e,t,a="10"){let n=new URLSearchParams;n.append("pageSize",e.toString()),n.append("pageNum",t.toString()),n.append("channelId",a);let l=await fetch(J+n.toString()),i=await l.json();if(0!==i.retcode)throw new Error(i.message);return i}let P=[];async function Q(e="10",t=!1){if(!t&&P.length>0)return P;let a=await K(1e3,1,e),n=a.data.list,l=a.data.total,i=Math.ceil(l/1e3);for(let r=2;r<=i;r++){let t=await K(1e3,r,e);n=n.concat(t.data.list)}return n.sort(((e,t)=>Number(t.id)-Number(e.id))),P=n,n}const V=`${G}/https://ys.mihoyo.com/main/news/detail/`,W=/poster=.*?src=\\"(.*?)\\" style/;const X=e({setup(e){const i=y(),o=x([]),c=x(1),s=x(1),p=x(!1);let h=[];const m=x("");function f(){document.title="原神视频列表"}if(k(f),_(f),0==h.length){(async()=>{try{const e=await Q();for(const t of e)h.push({id:t.id,title:t.title,channelId:t.channelId,time:t.start_time,imgSrc:(e=>{let t="";return e.ext.forEach((e=>{var a;"banner"==e.arrtName&&(t=null==e||null===(a=e.value[0])||void 0===a?void 0:a.url)})),t})(t)});p.value=!0,o.value=h.slice(0,30),s.value=Math.ceil(h.length/30)||1}catch(e){i.error(String(e),{closable:!0,duration:0}),console.warn(e)}})();let e,t=[];b(c,(e=>{let a=0==t.length?h:t;o.value=a.slice(30*(e-1),30*e)})),b(m,(a=>{if(""==(a=a.trim()))return t=[],o.value=h.slice(0,30),void(s.value=Math.ceil(h.length/30)||1);e&&clearTimeout(e),a&&(e=setTimeout((()=>{a==m.value&&(t=h.filter((e=>-1!=e.title.indexOf(a))),o.value=t.slice(0,30),s.value=Math.ceil(t.length/30)||1,c.value=1)}),200))}))}return(e,i)=>(r(),t(v,null,[p.value?d("",!0):(r(),u(l(S),{key:0,text:"",repeat:10})),p.value?(r(),u(l(j),{key:1,vertical:""},{default:n((()=>[a(l(C),{size:"medium",round:"",placeholder:"搜索",clearable:"","on-update:value":e=>m.value=e},null,8,["on-update:value"]),a(l(I),{page:c.value,"onUpdate:page":i[0]||(i[0]=e=>c.value=e),"page-count":s.value,"show-quick-jumper":""},null,8,["page","page-count"]),a(F,{card:o.value},null,8,["card"]),a(l(I),{page:c.value,"onUpdate:page":i[1]||(i[1]=e=>c.value=e),"page-count":s.value,"show-quick-jumper":""},null,8,["page","page-count"])])),_:1})):d("",!0)],64))}}),Y=E("返回列表"),Z=E("到米哈游官网查看"),ee=[{path:"/",component:X,meta:{keepAlive:!0}},{path:"/info/:id",component:e({props:{id:null},setup(e){const i=e,o=y(),c=x(!1),s=x(null),p=x(!0);return T((async()=>{try{let t=(await Q()).find((e=>e.id==i.id));t&&(document.title=t.title);let a=await async function(e){let t=await fetch(V+e),a=await t.text(),n=W.exec(a);if(null===n)return"";let l='"'+n[1]+'"';return JSON.parse(l)}(i.id);if(""==a)return p.value=!1,void(c.value=!0);s.value&&(e=s.value,new z({container:e,video:{url:a}})),p.value=!1}catch(t){o.error(String(t),{closable:!0,duration:0}),console.log(t),p.value=!1}var e})),(e,o)=>(r(),t(v,null,[N(f("div",{id:"dplayer",ref_key:"dplayer",ref:s},null,512),[[M,!p.value]]),N(a(l(S),{height:"50vh",width:"100%"},null,512),[[M,p.value]]),c.value?(r(),u(l(q),{key:0,status:"warning",title:"警告",description:"此 id 没有视频"},{footer:n((()=>[a(l(j),{justify:"center"},{default:n((()=>[a(l(A),{onClick:o[0]||(o[0]=e=>l(te).go(-1))},{default:n((()=>[Y])),_:1}),a(l(A),{onClick:o[1]||(o[1]=e=>{return t="https://ys.mihoyo.com/main/news/detail/"+i.id,void window.open(t);var t})},{default:n((()=>[Z])),_:1})])),_:1})])),_:1})):d("",!0)],64))}}),props:e=>({id:e.params.id}),meta:{scrollToTop:!0}}],te=L({history:O(),scrollBehavior:(e,t,a)=>{if(a)return a;if(e.hash)return{el:e.hash,behavior:"smooth"};let n={left:0,top:0};return!!e.meta.scrollToTop&&(n.left=0,n.top=0,n)},routes:ee}),ae=U(R);ae.use(te),ae.mount("#app")}}}))}();
