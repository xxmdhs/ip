import{d as C,c as N,a as v,w as m,u as c,N as K,o as f,R as U,b as g,r as L,e as w,K as W,f as J,F as b,g as Q,h as X,i as y,t as D,j as Y,k as O,l as h,m as Z,n as ee,p as $,q as T,s as V,v as te,x as E,y as ae,z as I,A as j,B as ne,C as F,D as P,E as re,G as se,H as oe,I as le}from"./vendor.2e6b4242.js";function be(){import("data:text/javascript,")}const ue=function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function n(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerpolicy&&(a.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?a.credentials="include":e.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(e){if(e.ep)return;e.ep=!0;const a=n(e);fetch(e.href,a)}};ue();var R=(o,l)=>{const n=o.__vccOpts||o;for(const[t,e]of l)n[t]=e;return n};const ie={class:"container"},ce=C({setup(o){return(l,n)=>(f(),N("div",ie,[v(c(K),null,{default:m(()=>[v(c(U),null,{default:m(({Component:t,route:e})=>[(f(),g(W,null,[e.meta.keepAlive?(f(),g(L(t),{key:0})):w("",!0)],1024)),e.meta.keepAlive?w("",!0):(f(),g(L(t),{key:0}))]),_:1})]),_:1})]))}});var de=R(ce,[["__scopeId","data-v-19f37417"]]);const pe=["src"],fe={class:"between"},ve=C({props:{card:null},setup(o){const l=o;function n(e){let a=[];for(let r of e)switch(r){case"11":a.push("\u65B0\u95FB");break;case"12":a.push("\u516C\u544A");break;case"258":a.push("\u6D3B\u52A8");break}return a}function t(e,a){document.title=a,A.push("/info/"+e)}return(e,a)=>(f(),g(c(Q),{cols:"3","item-responsive":"",responsive:"screen","x-gap":12,"y-gap":8},{default:m(()=>[(f(!0),N(b,null,J(l.card,({channelId:r,title:p,id:d,imgSrc:u,time:i})=>(f(),g(c(X),{span:"3 m:1",key:d},{default:m(()=>[v(c(Y),{title:p,class:"n-card",onClick:s=>t(d,p)},{cover:m(()=>[y("img",{src:u||"https://ys.mihoyo.com/main/_nuxt/img/37207c1.jpg"},null,8,pe)]),default:m(()=>[y("div",fe,[y("span",null,D(n(r).join(" ")),1),y("span",null,D(i),1)])]),_:2},1032,["title","onClick"])]),_:2},1024))),128))]),_:1}))}});var me=R(ve,[["__scopeId","data-v-6d3dd45b"]]);const q="https://quiet-disk-7a77.xmdhs.workers.dev",_e=`${q}/https://ys.mihoyo.com/content/ysCn/getContentList?`;async function M(o,l,n="10"){let t=new URLSearchParams;t.append("pageSize",o.toString()),t.append("pageNum",l.toString()),t.append("channelId",n);let a=await(await fetch(_e+t.toString())).json();if(a.retcode!==0)throw new Error(a.message);return a}let x=[];async function G(o="10",l=!1){if(!l&&x.length>0)return x;let n=await M(1e3,1,o),t=n.data.list,e=n.data.total,a=Math.ceil(e/1e3);for(let r=2;r<=a;r++){let p=await M(1e3,r,o);t=t.concat(p.data.list)}return t.sort((r,p)=>Number(p.id)-Number(r.id)),x=t,t}const he=`${q}/https://ys.mihoyo.com/main/news/detail/`,ge=/poster=.*?src=\\"(.*?)\\" style/;async function ye(o){let n=await(await fetch(he+o)).text(),t=ge.exec(n);if(t===null)return"";let e='"'+t[1]+'"';return JSON.parse(e)}const we=C({setup(o){const l=O(),n=h([]),t=h(1),e=h(1),a=h(!1);let r=[];const p=h("");function d(){document.title="\u539F\u795E\u89C6\u9891\u5217\u8868"}if(Z(d),ee(d),r.length==0){(async()=>{try{const s=await G();for(const _ of s)r.push({id:_.id,title:_.title,channelId:_.channelId,time:_.start_time,imgSrc:(H=>{let S="";return H.ext.forEach(k=>{var B;k.arrtName=="banner"&&(S=(B=k==null?void 0:k.value[0])==null?void 0:B.url)}),S})(_)});a.value=!0,n.value=r.slice(0,30),e.value=Math.ceil(r.length/30)||1}catch(s){l.error(String(s),{closable:!0,duration:0}),console.warn(s)}})();let u=[],i;$(t,s=>{let _=u.length==0?r:u;n.value=_.slice((s-1)*30,s*30)}),$(p,s=>{if(s=s.trim(),s==""){u=[],n.value=r.slice(0,30),e.value=Math.ceil(r.length/30)||1;return}i&&clearTimeout(i),s&&(i=setTimeout(()=>{s==p.value&&(u=r.filter(_=>_.title.indexOf(s)!=-1),n.value=u.slice(0,30),e.value=Math.ceil(u.length/30)||1)},200))})}return(u,i)=>(f(),N(b,null,[a.value?w("",!0):(f(),g(c(T),{key:0,text:"",repeat:10})),a.value?(f(),g(c(V),{key:1,vertical:""},{default:m(()=>[v(c(te),{size:"medium",round:"",placeholder:"\u641C\u7D22",clearable:"",autofocus:"","on-update:value":s=>p.value=s},null,8,["on-update:value"]),v(c(E),{page:t.value,"onUpdate:page":i[0]||(i[0]=s=>t.value=s),"page-count":e.value,"show-quick-jumper":""},null,8,["page","page-count"]),v(me,{card:n.value},null,8,["card"]),v(c(E),{page:t.value,"onUpdate:page":i[1]||(i[1]=s=>t.value=s),"page-count":e.value,"show-quick-jumper":""},null,8,["page","page-count"])]),_:1})):w("",!0)],64))}}),ke=P("\u8FD4\u56DE\u5217\u8868"),Ce=P("\u5230\u7C73\u54C8\u6E38\u5B98\u7F51\u67E5\u770B"),Ne=C({props:{id:null},setup(o){const l=o,n=O(),t=h(!1),e=h(null),a=h(!0);function r(d){window.open(d)}ae(async()=>{try{let u=(await G()).find(s=>s.id==l.id);u&&(document.title=u.title);let i=await ye(l.id);if(i==""){a.value=!1,t.value=!0;return}e.value&&p(e.value,i),a.value=!1}catch(d){n.error(String(d),{closable:!0,duration:0}),console.log(d),a.value=!1}});function p(d,u){let i={container:d,video:{url:u}};return new re(i)}return(d,u)=>(f(),N(b,null,[I(y("div",{id:"dplayer",ref_key:"dplayer",ref:e},null,512),[[j,!a.value]]),I(v(c(T),{height:"50vh",width:"100%"},null,512),[[j,a.value]]),t.value?(f(),g(c(ne),{key:0,status:"warning",title:"\u8B66\u544A",description:"\u6B64 id \u6CA1\u6709\u89C6\u9891"},{footer:m(()=>[v(c(V),{justify:"center"},{default:m(()=>[v(c(F),{onClick:u[0]||(u[0]=i=>c(A).go(-1))},{default:m(()=>[ke]),_:1}),v(c(F),{onClick:u[1]||(u[1]=i=>r("https://ys.mihoyo.com/main/news/detail/"+l.id))},{default:m(()=>[Ce]),_:1})]),_:1})]),_:1})):w("",!0)],64))}}),xe=[{path:"/",component:we,meta:{keepAlive:!0}},{path:"/info/:id",component:Ne,props:o=>({id:o.params.id}),meta:{scrollToTop:!0}}],A=se({history:oe(),scrollBehavior:(o,l,n)=>{if(n)return n;if(o.hash)return{el:o.hash,behavior:"smooth"};let t={left:0,top:0};if(o.meta.scrollToTop)t.left=0,t.top=0;else return!1;return t},routes:xe}),z=le(de);z.use(A);z.mount("#app");export{be as __vite_legacy_guard};
