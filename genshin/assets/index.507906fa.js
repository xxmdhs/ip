import{d as B,c as _,w as u,u as n,N as Z,a as M,o as h,b as d,e as ee,n as C,f as $,g as te,R as se,K as ae,r as V,h as b,i as ne,j as L,k as oe,F as T,l as re,m as ue,t as K,p as A,q as le,s as ie,v as E,x as q,y as w,z as ce,A as de,B as U,C as G,D as F,E as H,G as S,H as O,I as P,J as pe,L as fe,M as me,O as ve,P as J,Q as he,S as _e,T as ye,U as ge}from"./vendor.bc559ba3.js";function tt(){import("data:text/javascript,")}const we=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function o(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerpolicy&&(s.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?s.credentials="include":e.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(e){if(e.ep)return;e.ep=!0;const s=o(e);fetch(e.href,s)}};we();const $e="_container_1omqz_2",Ne="_headerText_1omqz_31",ke="_header_1omqz_31";var Ce={container:$e,headerText:Ne,header:ke},z=(i,r)=>{const o=i.__vccOpts||i;for(const[t,e]of r)o[t]=e;return o};const be=B({setup(i){const r=M();return(o,t)=>(h(),_(n(Z),null,{default:u(()=>[d(n(ne),null,{default:u(()=>[d(n(ee),{bordered:"",class:C(o.$style.header)},{default:u(()=>[$("strong",{class:C(o.$style.headerText),onClick:t[0]||(t[0]=e=>n(r).push("/"))},"\u539F\u795E\u5B98\u7F51\u65B0\u95FB\u5217\u8868",2)]),_:1},8,["class"]),d(n(te),{class:C(o.$style.container),"content-style":"padding: 24px;"},{default:u(()=>[d(n(se),null,{default:u(({Component:e,route:s})=>[(h(),_(ae,null,[s.meta.keepAlive?(h(),_(V(e),{key:0})):b("",!0)],1024)),s.meta.keepAlive?b("",!0):(h(),_(V(e),{key:0}))]),_:1})]),_:1},8,["class"])]),_:1})]),_:1}))}}),Ee={$style:Ce};var Be=z(be,[["__cssModules",Ee]]);const De="_column_1o6th_3",Fe="_between_1o6th_13";var Ae={column:De,between:Fe,"n-card":"_n-card_1o6th_27"};const Se=["src"],xe=E("\u5B98\u7F51\u67E5\u770B"),Me=B({props:{card:null},setup(i){const r=i;function o(s){window.open(s,"_blank","noreferrer=yes")}function t(s){let a=[];for(let m of s)switch(m){case"11":a.push("\u65B0\u95FB");break;case"12":a.push("\u516C\u544A");break;case"258":a.push("\u6D3B\u52A8");break}return a}function e(s,a){document.title=a,X.push("/info/"+s)}return(s,a)=>(h(),_(n(re),{cols:"3","item-responsive":"",responsive:"screen","x-gap":12,"y-gap":8},{default:u(()=>[(h(!0),L(T,null,oe(r.card,({channelId:m,title:y,id:k,imgSrc:c,time:v})=>(h(),_(n(ue),{span:"3 m:1",key:k},{default:u(()=>[d(n(ie),{title:y,class:C(s.$style["n-card"]),onClick:p=>e(k,y)},{cover:u(()=>[$("img",{src:c||"https://ys.mihoyo.com/main/_nuxt/img/37207c1.jpg"},null,8,Se)]),default:u(()=>[$("div",{class:C(s.$style.between)},[$("div",{class:C(s.$style.column)},[$("span",null,K(t(m).join(" ")),1),$("span",null,K(v),1)],2),d(n(A),{onClick:le(p=>o(`https://ys.mihoyo.com/main/news/detail/${k}`),["stop"])},{default:u(()=>[xe]),_:2},1032,["onClick"])],2)]),_:2},1032,["title","class","onClick"])]),_:2},1024))),128))]),_:1}))}}),Le={$style:Ae};var Te=z(Me,[["__cssModules",Le]]);const W="https://quiet-disk-7a77.xmdhs.workers.dev",ze=`${W}/https://ys.mihoyo.com/content/ysCn/getContentList?`;async function j(i,r,o="10"){let t=new URLSearchParams;t.append("pageSize",i.toString()),t.append("pageNum",r.toString()),t.append("channelId",o);let e=await fetch(ze+t.toString());if(e.status!==200)throw new Error(`http code: ${e.status}`);let s=await e.json();if(s.retcode!==0)throw new Error(s.message);return s}let x=[];async function Q(i="10",r=!1){if(!r&&x.length>0)return x;let o=await j(1e3,1,i),t=o.data.list,e=o.data.total,s=Math.ceil(e/1e3);for(let a=2;a<=s;a++){let m=await j(1e3,a,i);t=t.concat(m.data.list)}return t.sort((a,m)=>Number(m.id)-Number(a.id)),x=t,t}const Re=`${W}/https://ys.mihoyo.com/main/news/detail/`,Ie=/src=\\"(.*?.mp4)\\"/;async function Ve(i){let r=await fetch(Re+i);if(r.status!==200)throw new Error(`http code: ${r.status}`);let o=await r.text(),t=Ie.exec(o);if(t===null)return"";let e='"'+t[1]+'"';return JSON.parse(e)}const Ke="_warp_1c5fc_3";var Ue={warp:Ke};const Oe=E("\u6570\u636E\u52A0\u8F7D\u4E2D"),Pe=$("span",null,"\u8DF3\u8F6C",-1),je=$("span",null,"\u8DF3\u8F6C",-1),qe=B({setup(i){const r=q(),o=w([]),t=w(1),e=w(1),s=w(!1);let a=[];const m=w(""),y=w();function k(){document.title="\u539F\u795E\u89C6\u9891\u5217\u8868"}ce(k),de(k);const c=w("");function v(){if(isNaN(Number(c.value))){c.value="";return}if(Number(c.value)>e.value){c.value="";return}t.value=Number(c.value),c.value=""}if(a.length==0){(async()=>{try{const l=await Q();for(const g of l)a.push({id:g.id,title:g.title,channelId:g.channelId,time:g.start_time,imgSrc:(N=>{let R="";return N.ext.forEach(D=>{var I;D.arrtName=="banner"&&(R=(I=D==null?void 0:D.value[0])==null?void 0:I.url)}),R})(g)});s.value=!0,o.value=a.slice(0,30),e.value=Math.ceil(a.length/30)||1}catch(l){r.error(String(l),{closable:!0,duration:0}),console.warn(l)}})();let p=[],f;U(t,l=>{var N;let g=p.length==0?a:p;o.value=g.slice((l-1)*30,l*30),(N=y.value)==null||N.scrollIntoView({behavior:"smooth"})}),U(m,l=>{if(l=l.trim(),l==""){p=[],o.value=a.slice(0,30),e.value=Math.ceil(a.length/30)||1,t.value=1;return}f&&clearTimeout(f),l&&(f=setTimeout(()=>{if(l!=m.value)return;let g;try{g=new RegExp(l,"i")}catch(N){r.error(String(N),{closable:!0,duration:1500}),console.warn(N);return}p=a.filter(N=>g.test(N.title)),o.value=p.slice(0,30),e.value=Math.ceil(p.length/30)||1,t.value=1},200))})}return(p,f)=>(h(),L(T,null,[s.value?b("",!0):(h(),_(n(G),{key:0},{description:u(()=>[Oe]),default:u(()=>[d(n(H),{text:"",repeat:10})]),_:1})),s.value?(h(),_(n(F),{key:1,vertical:""},{default:u(()=>[d(n(S),{size:"medium",round:"",placeholder:"\u6B63\u5219\u641C\u7D22",clearable:"",value:m.value,"onUpdate:value":f[0]||(f[0]=l=>m.value=l)},null,8,["value"]),$("div",{ref_key:"listTopRef",ref:y},null,512),d(n(P),{page:t.value,"onUpdate:page":f[2]||(f[2]=l=>t.value=l),"page-count":e.value,class:C(p.$style.warp)},{suffix:u(()=>[d(n(F),{size:"small",align:"center"},{default:u(()=>[Pe,d(n(S),{value:c.value,"onUpdate:value":f[1]||(f[1]=l=>c.value=l),onKeyup:O(v,["enter"]),placeholder:"",autosize:"",style:{"min-width":"3em"}},null,8,["value","onKeyup"])]),_:1})]),_:1},8,["page","page-count","class"]),d(Te,{card:o.value},null,8,["card"]),d(n(P),{page:t.value,"onUpdate:page":f[4]||(f[4]=l=>t.value=l),"page-count":e.value,class:C(p.$style.warp)},{suffix:u(()=>[d(n(F),{size:"small",align:"center"},{default:u(()=>[je,d(n(S),{value:c.value,"onUpdate:value":f[3]||(f[3]=l=>c.value=l),onKeyup:O(v,["enter"]),placeholder:"",autosize:"",style:{"min-width":"3em"}},null,8,["value","onKeyup"])]),_:1})]),_:1},8,["page","page-count","class"])]),_:1})):b("",!0)],64))}}),Ge={$style:Ue};var He=z(qe,[["__cssModules",Ge]]);const Je=E("\u6570\u636E\u52A0\u8F7D\u4E2D"),We=E("\u8FD4\u56DE\u5217\u8868"),Qe=E("\u5230\u7C73\u54C8\u6E38\u5B98\u7F51\u67E5\u770B"),Xe=B({props:{id:null},setup(i){const r=i,o=M(),t=q(),e=w(!1),s=w(null);pe(()=>{y==null||y.destroy()});const a=w(!0);function m(c){window.open(c,"_blank","noreferrer=yes")}let y;fe(async()=>{try{let v=(await Q()).find(f=>f.id==r.id);v&&(document.title=v.title);let p=await Ve(r.id);if(p==""){a.value=!1,e.value=!0;return}s.value&&(y=k(s.value,p)),a.value=!1}catch(c){t.error(String(c),{closable:!0,duration:0}),console.log(c),a.value=!1}});function k(c,v){let p={container:c,video:{url:v}};return new he(p)}return(c,v)=>(h(),L(T,null,[me($("div",{id:"dplayer",ref_key:"dplayer",ref:s},null,512),[[ve,!a.value]]),a.value?(h(),_(n(G),{key:0},{description:u(()=>[Je]),default:u(()=>[d(n(H),{height:"30vh",width:"100%"})]),_:1})):b("",!0),e.value?(h(),_(n(J),{key:1,status:"warning",title:"\u8B66\u544A",description:"\u6B64 id \u6CA1\u6709\u89C6\u9891"},{footer:u(()=>[d(n(F),{justify:"center"},{default:u(()=>[d(n(A),{onClick:v[0]||(v[0]=p=>n(o).go(-1))},{default:u(()=>[We]),_:1}),d(n(A),{onClick:v[1]||(v[1]=p=>m("https://ys.mihoyo.com/main/news/detail/"+r.id))},{default:u(()=>[Qe]),_:1})]),_:1})]),_:1})):b("",!0)],64))}}),Ye=E("\u8FD4\u56DE\u4E0A\u4E00\u9875"),Ze=B({setup(i){const r=M();return(o,t)=>(h(),_(n(J),{status:"404",title:"404 \u8D44\u6E90\u4E0D\u5B58\u5728",description:"\u5565\u90FD\u6CA1\u6709"},{footer:u(()=>[d(n(A),{onClick:t[0]||(t[0]=e=>n(r).back())},{default:u(()=>[Ye]),_:1})]),_:1}))}}),et=[{path:"/",component:He,meta:{keepAlive:!0}},{path:"/info/:id",component:Xe,props:i=>({id:i.params.id}),meta:{scrollToTop:!0}},{path:"/:pathMatch(.*)*",name:"NotFound",component:Ze,meta:{scrollToTop:!0}}],X=_e({history:ye(),scrollBehavior:(i,r,o)=>{if(o)return o;if(i.hash)return{el:i.hash,behavior:"smooth"};let t={left:0,top:0};if(i.meta.scrollToTop)t.left=0,t.top=0;else return!1;return t},routes:et}),Y=ge(Be);Y.use(X);Y.mount("#app");export{tt as __vite_legacy_guard};
