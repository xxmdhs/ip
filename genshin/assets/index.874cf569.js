import{d as N,c as b,a as m,w as f,u as c,N as U,n as C,o as h,R as J,b as _,r as D,e as w,K as W,f as Q,F as B,g as X,h as Y,i as y,t as E,j as A,k as Z,l as ee,m as x,p as V,q as g,s as te,v as ae,x as F,y as P,z as R,A as ne,B as j,C as se,D as I,E as O,G as oe,H as re,I as le,J as ue,L as ie}from"./vendor.bd7962d2.js";function Ee(){import("data:text/javascript,")}const ce=function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&e(n)}).observe(document,{childList:!0,subtree:!0});function s(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerpolicy&&(a.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?a.credentials="include":t.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function e(t){if(t.ep)return;t.ep=!0;const a=s(t);fetch(t.href,a)}};ce();const de="_container_451mx_2";var pe={container:de},q=(r,l)=>{const s=r.__vccOpts||r;for(const[e,t]of l)s[e]=t;return s};const fe=N({setup(r){return(l,s)=>(h(),b("div",{class:C(l.$style.container)},[m(c(U),null,{default:f(()=>[m(c(J),null,{default:f(({Component:e,route:t})=>[(h(),_(W,null,[t.meta.keepAlive?(h(),_(D(e),{key:0})):w("",!0)],1024)),t.meta.keepAlive?w("",!0):(h(),_(D(e),{key:0}))]),_:1})]),_:1})],2))}}),me={$style:pe};var he=q(fe,[["__cssModules",me]]);const ve="_column_1o6th_3",ge="_between_1o6th_13";var _e={column:ve,between:ge,"n-card":"_n-card_1o6th_27"};const ye=["src"],we=x("\u5B98\u7F51\u67E5\u770B"),ke=N({props:{card:null},setup(r){const l=r;function s(a){window.open(a,"_blank","noreferrer=yes")}function e(a){let n=[];for(let p of a)switch(p){case"11":n.push("\u65B0\u95FB");break;case"12":n.push("\u516C\u544A");break;case"258":n.push("\u6D3B\u52A8");break}return n}function t(a,n){document.title=n,S.push("/info/"+a)}return(a,n)=>(h(),_(c(X),{cols:"3","item-responsive":"",responsive:"screen","x-gap":12,"y-gap":8},{default:f(()=>[(h(!0),b(B,null,Q(l.card,({channelId:p,title:d,id:u,imgSrc:i,time:o})=>(h(),_(c(Y),{span:"3 m:1",key:u},{default:f(()=>[m(c(ee),{title:d,class:C(a.$style["n-card"]),onClick:v=>t(u,d)},{cover:f(()=>[y("img",{src:i||"https://ys.mihoyo.com/main/_nuxt/img/37207c1.jpg"},null,8,ye)]),default:f(()=>[y("div",{class:C(a.$style.between)},[y("div",{class:C(a.$style.column)},[y("span",null,E(e(p).join(" ")),1),y("span",null,E(o),1)],2),m(c(A),{onClick:Z(v=>s(`https://ys.mihoyo.com/main/news/detail/${u}`),["stop"])},{default:f(()=>[we]),_:2},1032,["onClick"])],2)]),_:2},1032,["title","class","onClick"])]),_:2},1024))),128))]),_:1}))}}),Ce={$style:_e};var Ne=q(ke,[["__cssModules",Ce]]);const z="https://quiet-disk-7a77.xmdhs.workers.dev",be=`${z}/https://ys.mihoyo.com/content/ysCn/getContentList?`;async function T(r,l,s="10"){let e=new URLSearchParams;e.append("pageSize",r.toString()),e.append("pageNum",l.toString()),e.append("channelId",s);let a=await(await fetch(be+e.toString())).json();if(a.retcode!==0)throw new Error(a.message);return a}let $=[];async function G(r="10",l=!1){if(!l&&$.length>0)return $;let s=await T(1e3,1,r),e=s.data.list,t=s.data.total,a=Math.ceil(t/1e3);for(let n=2;n<=a;n++){let p=await T(1e3,n,r);e=e.concat(p.data.list)}return e.sort((n,p)=>Number(p.id)-Number(n.id)),$=e,e}const $e=`${z}/https://ys.mihoyo.com/main/news/detail/`,Ae=/src=\\"(.*?.mp4)\\"/;async function Be(r){let s=await(await fetch($e+r)).text(),e=Ae.exec(s);if(e===null)return"";let t='"'+e[1]+'"';return JSON.parse(t)}const xe=N({setup(r){const l=V(),s=g([]),e=g(1),t=g(1),a=g(!1);let n=[];const p=g("");function d(){document.title="\u539F\u795E\u89C6\u9891\u5217\u8868"}if(te(d),ae(d),n.length==0){(async()=>{try{const o=await G();for(const v of o)n.push({id:v.id,title:v.title,channelId:v.channelId,time:v.start_time,imgSrc:(K=>{let L="";return K.ext.forEach(k=>{var M;k.arrtName=="banner"&&(L=(M=k==null?void 0:k.value[0])==null?void 0:M.url)}),L})(v)});a.value=!0,s.value=n.slice(0,30),t.value=Math.ceil(n.length/30)||1}catch(o){l.error(String(o),{closable:!0,duration:0}),console.warn(o)}})();let u=[],i;F(e,o=>{let v=u.length==0?n:u;s.value=v.slice((o-1)*30,o*30)}),F(p,o=>{if(o=o.trim(),o==""){u=[],s.value=n.slice(0,30),t.value=Math.ceil(n.length/30)||1;return}i&&clearTimeout(i),o&&(i=setTimeout(()=>{o==p.value&&(u=n.filter(v=>v.title.indexOf(o)!=-1),s.value=u.slice(0,30),t.value=Math.ceil(u.length/30)||1,e.value=1)},200))})}return(u,i)=>(h(),b(B,null,[a.value?w("",!0):(h(),_(c(P),{key:0,text:"",repeat:10})),a.value?(h(),_(c(R),{key:1,vertical:""},{default:f(()=>[m(c(ne),{size:"medium",round:"",placeholder:"\u641C\u7D22",clearable:"","on-update:value":o=>p.value=o},null,8,["on-update:value"]),m(c(j),{page:e.value,"onUpdate:page":i[0]||(i[0]=o=>e.value=o),"page-count":t.value,"show-quick-jumper":""},null,8,["page","page-count"]),m(Ne,{card:s.value},null,8,["card"]),m(c(j),{page:e.value,"onUpdate:page":i[1]||(i[1]=o=>e.value=o),"page-count":t.value,"show-quick-jumper":""},null,8,["page","page-count"])]),_:1})):w("",!0)],64))}}),Se=x("\u8FD4\u56DE\u5217\u8868"),Le=x("\u5230\u7C73\u54C8\u6E38\u5B98\u7F51\u67E5\u770B"),Me=N({props:{id:null},setup(r){const l=r,s=V(),e=g(!1),t=g(null),a=g(!0);function n(d){window.open(d,"_blank","noreferrer=yes")}se(async()=>{try{let u=(await G()).find(o=>o.id==l.id);u&&(document.title=u.title);let i=await Be(l.id);if(i==""){a.value=!1,e.value=!0;return}t.value&&p(t.value,i),a.value=!1}catch(d){s.error(String(d),{closable:!0,duration:0}),console.log(d),a.value=!1}});function p(d,u){let i={container:d,video:{url:u}};return new re(i)}return(d,u)=>(h(),b(B,null,[I(y("div",{id:"dplayer",ref_key:"dplayer",ref:t},null,512),[[O,!a.value]]),I(m(c(P),{height:"50vh",width:"100%"},null,512),[[O,a.value]]),e.value?(h(),_(c(oe),{key:0,status:"warning",title:"\u8B66\u544A",description:"\u6B64 id \u6CA1\u6709\u89C6\u9891"},{footer:f(()=>[m(c(R),{justify:"center"},{default:f(()=>[m(c(A),{onClick:u[0]||(u[0]=i=>c(S).go(-1))},{default:f(()=>[Se]),_:1}),m(c(A),{onClick:u[1]||(u[1]=i=>n("https://ys.mihoyo.com/main/news/detail/"+l.id))},{default:f(()=>[Le]),_:1})]),_:1})]),_:1})):w("",!0)],64))}}),De=[{path:"/",component:xe,meta:{keepAlive:!0}},{path:"/info/:id",component:Me,props:r=>({id:r.params.id}),meta:{scrollToTop:!0}}],S=le({history:ue(),scrollBehavior:(r,l,s)=>{if(s)return s;if(r.hash)return{el:r.hash,behavior:"smooth"};let e={left:0,top:0};if(r.meta.scrollToTop)e.left=0,e.top=0;else return!1;return e},routes:De}),H=ie(he);H.use(S);H.mount("#app");export{Ee as __vite_legacy_guard};
