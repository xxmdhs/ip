import{d as E,c as y,w as i,u as s,N as Z,a as T,o as v,b as d,e as ee,n as $,f as N,g as te,R as ae,K as ne,r as V,h as b,i as se,j as L,k as oe,F as M,l as re,m as ue,t as I,p as A,q as le,s as ie,v as D,x as q,y as w,z as ce,A as de,B as K,C as U,D as F,E as G,G as S,H as O,I as P,J as pe,L as fe,M as me,O as H,P as ve,Q as he,S as _e,T as ye}from"./vendor.4790b38f.js";function Qe(){import("data:text/javascript,")}const ge=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&e(n)}).observe(document,{childList:!0,subtree:!0});function o(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerpolicy&&(a.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?a.credentials="include":t.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function e(t){if(t.ep)return;t.ep=!0;const a=o(t);fetch(t.href,a)}};ge();const we="_container_1omqz_2",Ne="_headerText_1omqz_31",ke="_header_1omqz_31";var Ce={container:we,headerText:Ne,header:ke},J=(l,r)=>{const o=l.__vccOpts||l;for(const[e,t]of r)o[e]=t;return o};const $e=E({setup(l){const r=T();return(o,e)=>(v(),y(s(Z),null,{default:i(()=>[d(s(se),null,{default:i(()=>[d(s(ee),{bordered:"",class:$(o.$style.header)},{default:i(()=>[N("strong",{class:$(o.$style.headerText),onClick:e[0]||(e[0]=t=>s(r).push("/"))},"\u539F\u795E\u5B98\u7F51\u65B0\u95FB\u5217\u8868",2)]),_:1},8,["class"]),d(s(te),{class:$(o.$style.container),"content-style":"padding: 24px;"},{default:i(()=>[d(s(ae),null,{default:i(({Component:t,route:a})=>[(v(),y(ne,null,[a.meta.keepAlive?(v(),y(V(t),{key:0})):b("",!0)],1024)),a.meta.keepAlive?b("",!0):(v(),y(V(t),{key:0}))]),_:1})]),_:1},8,["class"])]),_:1})]),_:1}))}}),be={$style:Ce};var De=J($e,[["__cssModules",be]]);const Ee="_column_1o6th_3",Be="_between_1o6th_13";var Fe={column:Ee,between:Be,"n-card":"_n-card_1o6th_27"};const Ae=["src"],Se=D("\u5B98\u7F51\u67E5\u770B"),xe=E({props:{card:null},setup(l){const r=l;function o(a){window.open(a,"_blank","noreferrer=yes")}function e(a){let n=[];for(let f of a)switch(f){case"11":n.push("\u65B0\u95FB");break;case"12":n.push("\u516C\u544A");break;case"258":n.push("\u6D3B\u52A8");break}return n}function t(a,n){document.title=n,X.push("/info/"+a)}return(a,n)=>(v(),y(s(re),{cols:"3","item-responsive":"",responsive:"screen","x-gap":12,"y-gap":8},{default:i(()=>[(v(!0),L(M,null,oe(r.card,({channelId:f,title:C,id:p,imgSrc:c,time:h})=>(v(),y(s(ue),{span:"3 m:1",key:p},{default:i(()=>[d(s(ie),{title:C,class:$(a.$style["n-card"]),onClick:_=>t(p,C)},{cover:i(()=>[N("img",{src:c||"https://ys.mihoyo.com/main/_nuxt/img/37207c1.jpg"},null,8,Ae)]),default:i(()=>[N("div",{class:$(a.$style.between)},[N("div",{class:$(a.$style.column)},[N("span",null,I(e(f).join(" ")),1),N("span",null,I(h),1)],2),d(s(A),{onClick:le(_=>o(`https://ys.mihoyo.com/main/news/detail/${p}`),["stop"])},{default:i(()=>[Se]),_:2},1032,["onClick"])],2)]),_:2},1032,["title","class","onClick"])]),_:2},1024))),128))]),_:1}))}}),Te={$style:Fe};var Le=J(xe,[["__cssModules",Te]]);const W="https://quiet-disk-7a77.xmdhs.workers.dev",Me=`${W}/https://ys.mihoyo.com/content/ysCn/getContentList?`;async function j(l,r,o="10"){let e=new URLSearchParams;e.append("pageSize",l.toString()),e.append("pageNum",r.toString()),e.append("channelId",o);let a=await(await fetch(Me+e.toString())).json();if(a.retcode!==0)throw new Error(a.message);return a}let x=[];async function Q(l="10",r=!1){if(!r&&x.length>0)return x;let o=await j(1e3,1,l),e=o.data.list,t=o.data.total,a=Math.ceil(t/1e3);for(let n=2;n<=a;n++){let f=await j(1e3,n,l);e=e.concat(f.data.list)}return e.sort((n,f)=>Number(f.id)-Number(n.id)),x=e,e}const ze=`${W}/https://ys.mihoyo.com/main/news/detail/`,Re=/src=\\"(.*?.mp4)\\"/;async function Ve(l){let o=await(await fetch(ze+l)).text(),e=Re.exec(o);if(e===null)return"";let t='"'+e[1]+'"';return JSON.parse(t)}const Ie=D("\u6570\u636E\u52A0\u8F7D\u4E2D"),Ke=N("span",null,"\u8DF3\u8F6C",-1),Oe=N("span",null,"\u8DF3\u8F6C",-1),Pe=E({setup(l){const r=q(),o=w([]),e=w(1),t=w(1),a=w(!1);let n=[];const f=w(""),C=w();function p(){document.title="\u539F\u795E\u89C6\u9891\u5217\u8868"}ce(p),de(p);const c=w("");function h(){if(isNaN(Number(c.value))){c.value="";return}if(Number(c.value)>t.value){c.value="";return}e.value=Number(c.value),c.value=""}if(n.length==0){(async()=>{try{const u=await Q();for(const g of u)n.push({id:g.id,title:g.title,channelId:g.channelId,time:g.start_time,imgSrc:(k=>{let z="";return k.ext.forEach(B=>{var R;B.arrtName=="banner"&&(z=(R=B==null?void 0:B.value[0])==null?void 0:R.url)}),z})(g)});a.value=!0,o.value=n.slice(0,30),t.value=Math.ceil(n.length/30)||1}catch(u){r.error(String(u),{closable:!0,duration:0}),console.warn(u)}})();let _=[],m;K(e,u=>{var k;let g=_.length==0?n:_;o.value=g.slice((u-1)*30,u*30),(k=C.value)==null||k.scrollIntoView({behavior:"smooth"})}),K(f,u=>{if(u=u.trim(),u==""){_=[],o.value=n.slice(0,30),t.value=Math.ceil(n.length/30)||1,e.value=1;return}m&&clearTimeout(m),u&&(m=setTimeout(()=>{if(u!=f.value)return;let g;try{g=new RegExp(u,"i")}catch(k){r.error(String(k),{closable:!0,duration:1500}),console.warn(k);return}_=n.filter(k=>g.test(k.title)),o.value=_.slice(0,30),t.value=Math.ceil(_.length/30)||1,e.value=1},200))})}return(_,m)=>(v(),L(M,null,[a.value?b("",!0):(v(),y(s(U),{key:0},{description:i(()=>[Ie]),default:i(()=>[d(s(G),{text:"",repeat:10})]),_:1})),a.value?(v(),y(s(F),{key:1,vertical:""},{default:i(()=>[d(s(S),{size:"medium",round:"",placeholder:"\u6B63\u5219\u641C\u7D22",clearable:"",value:f.value,"onUpdate:value":m[0]||(m[0]=u=>f.value=u)},null,8,["value"]),N("div",{ref_key:"listTopRef",ref:C},null,512),d(s(F),{size:"small",align:"center"},{default:i(()=>[d(s(O),{page:e.value,"onUpdate:page":m[1]||(m[1]=u=>e.value=u),"page-count":t.value},null,8,["page","page-count"]),Ke,d(s(S),{value:c.value,"onUpdate:value":m[2]||(m[2]=u=>c.value=u),onKeyup:P(h,["enter"]),placeholder:"",autosize:"",style:{"min-width":"2em"}},null,8,["value","onKeyup"])]),_:1}),d(Le,{card:o.value},null,8,["card"]),d(s(F),{size:"small",align:"center"},{default:i(()=>[d(s(O),{page:e.value,"onUpdate:page":m[3]||(m[3]=u=>e.value=u),"page-count":t.value},null,8,["page","page-count"]),Oe,d(s(S),{value:c.value,"onUpdate:value":m[4]||(m[4]=u=>c.value=u),onKeyup:P(h,["enter"]),placeholder:"",autosize:"",style:{"min-width":"2em"}},null,8,["value","onKeyup"])]),_:1})]),_:1})):b("",!0)],64))}}),je=D("\u6570\u636E\u52A0\u8F7D\u4E2D"),qe=D("\u8FD4\u56DE\u5217\u8868"),Ue=D("\u5230\u7C73\u54C8\u6E38\u5B98\u7F51\u67E5\u770B"),Ge=E({props:{id:null},setup(l){const r=l,o=T(),e=q(),t=w(!1),a=w(null),n=w(!0);function f(p){window.open(p,"_blank","noreferrer=yes")}pe(async()=>{try{let c=(await Q()).find(_=>_.id==r.id);c&&(document.title=c.title);let h=await Ve(r.id);if(h==""){n.value=!1,t.value=!0;return}a.value&&C(a.value,h),n.value=!1}catch(p){e.error(String(p),{closable:!0,duration:0}),console.log(p),n.value=!1}});function C(p,c){let h={container:p,video:{url:c}};return new ve(h)}return(p,c)=>(v(),L(M,null,[fe(N("div",{id:"dplayer",ref_key:"dplayer",ref:a},null,512),[[me,!n.value]]),n.value?(v(),y(s(U),{key:0},{description:i(()=>[je]),default:i(()=>[d(s(G),{height:"30vh",width:"100%"})]),_:1})):b("",!0),t.value?(v(),y(s(H),{key:1,status:"warning",title:"\u8B66\u544A",description:"\u6B64 id \u6CA1\u6709\u89C6\u9891"},{footer:i(()=>[d(s(F),{justify:"center"},{default:i(()=>[d(s(A),{onClick:c[0]||(c[0]=h=>s(o).go(-1))},{default:i(()=>[qe]),_:1}),d(s(A),{onClick:c[1]||(c[1]=h=>f("https://ys.mihoyo.com/main/news/detail/"+r.id))},{default:i(()=>[Ue]),_:1})]),_:1})]),_:1})):b("",!0)],64))}}),He=D("\u8FD4\u56DE\u4E0A\u4E00\u9875"),Je=E({setup(l){const r=T();return(o,e)=>(v(),y(s(H),{status:"404",title:"404 \u8D44\u6E90\u4E0D\u5B58\u5728",description:"\u5565\u90FD\u6CA1\u6709"},{footer:i(()=>[d(s(A),{onClick:e[0]||(e[0]=t=>s(r).back())},{default:i(()=>[He]),_:1})]),_:1}))}}),We=[{path:"/",component:Pe,meta:{keepAlive:!0}},{path:"/info/:id",component:Ge,props:l=>({id:l.params.id}),meta:{scrollToTop:!0}},{path:"/:pathMatch(.*)*",name:"NotFound",component:Je,meta:{scrollToTop:!0}}],X=he({history:_e(),scrollBehavior:(l,r,o)=>{if(o)return o;if(l.hash)return{el:l.hash,behavior:"smooth"};let e={left:0,top:0};if(l.meta.scrollToTop)e.left=0,e.top=0;else return!1;return e},routes:We}),Y=ye(De);Y.use(X);Y.mount("#app");export{Qe as __vite_legacy_guard};
