!function(){var e=document.createElement("style");e.innerHTML="._container_451mx_2{width:100%;margin-right:auto;margin-left:auto;padding:1rem}@media (min-width: 576px){._container_451mx_2{max-width:510px;padding-right:0;padding-left:0}}@media (min-width: 768px){._container_451mx_2{max-width:700px}}@media (min-width: 992px){._container_451mx_2{max-width:920px}}@media (min-width: 1200px){._container_451mx_2{max-width:1130px}}._column_1o6th_3{display:flex;flex-direction:column}._between_1o6th_13{display:flex;flex-direction:row;justify-content:space-between;align-items:flex-end}._n-card_1o6th_27{cursor:pointer;height:100%}.n-pagination{flex-wrap:wrap}\n",document.head.appendChild(e),System.register(["./vendor-legacy.097a718f.js"],(function(){"use strict";var e,t,n,a,l,i,o,r,u,c,s,d,p,m,h,v,f,_,g,w,y,x,k,b,C,S,j,$,M,T,N,I,q,A,E,L,z,O,U,B;return{setters:[function(H){e=H.d,t=H.c,n=H.a,a=H.w,l=H.u,i=H.N,o=H.n,r=H.o,u=H.R,c=H.b,s=H.r,d=H.e,p=H.K,m=H.f,h=H.F,v=H.g,f=H.h,_=H.i,g=H.t,w=H.j,y=H.k,x=H.l,k=H.m,b=H.p,C=H.q,S=H.s,j=H.v,$=H.x,M=H.y,T=H.z,N=H.A,I=H.B,q=H.C,A=H.D,E=H.E,L=H.G,z=H.H,O=H.I,U=H.J,B=H.L}],execute:function(){var H={container:"_container_451mx_2"},J=(e,t)=>{const n=e.__vccOpts||e;for(const[a,l]of t)n[a]=l;return n};var R=J(e({setup:e=>(e,m)=>(r(),t("div",{class:o(e.$style.container)},[n(l(i),null,{default:a((()=>[n(l(u),null,{default:a((({Component:e,route:t})=>[(r(),c(p,null,[t.meta.keepAlive?(r(),c(s(e),{key:0})):d("",!0)],1024)),t.meta.keepAlive?d("",!0):(r(),c(s(e),{key:0}))])),_:1})])),_:1})],2))}),[["__cssModules",{$style:H}]]);var D={column:"_column_1o6th_3",between:"_between_1o6th_13","n-card":"_n-card_1o6th_27"};const F=["src"],G=k("官网查看");var K=J(e({props:{card:null},setup(e){const i=e;function u(e){let t=[];for(let n of e)switch(n){case"11":t.push("新闻");break;case"12":t.push("公告");break;case"258":t.push("活动")}return t}return(e,s)=>(r(),c(l(v),{cols:"3","item-responsive":"",responsive:"screen","x-gap":12,"y-gap":8},{default:a((()=>[(r(!0),t(h,null,m(i.card,(({channelId:t,title:i,id:s,imgSrc:d,time:p})=>(r(),c(l(f),{span:"3 m:1",key:s},{default:a((()=>[n(l(x),{title:i,class:o(e.$style["n-card"]),onClick:e=>function(e,t){document.title=t,le.push("/info/"+e)}(s,i)},{cover:a((()=>[_("img",{src:d||"https://ys.mihoyo.com/main/_nuxt/img/37207c1.jpg"},null,8,F)])),default:a((()=>[_("div",{class:o(e.$style.between)},[_("div",{class:o(e.$style.column)},[_("span",null,g(u(t).join(" ")),1),_("span",null,g(p),1)],2),n(l(w),{onClick:y((e=>{return t=`https://ys.mihoyo.com/main/news/detail/${s}`,void window.open(t,"_blank","noreferrer=yes");var t}),["stop"])},{default:a((()=>[G])),_:2},1032,["onClick"])],2)])),_:2},1032,["title","class","onClick"])])),_:2},1024)))),128))])),_:1}))}}),[["__cssModules",{$style:D}]]);const P="https://quiet-disk-7a77.xmdhs.workers.dev",Q=`${P}/https://ys.mihoyo.com/content/ysCn/getContentList?`;async function V(e,t,n="10"){let a=new URLSearchParams;a.append("pageSize",e.toString()),a.append("pageNum",t.toString()),a.append("channelId",n);let l=await fetch(Q+a.toString()),i=await l.json();if(0!==i.retcode)throw new Error(i.message);return i}let W=[];async function X(e="10",t=!1){if(!t&&W.length>0)return W;let n=await V(1e3,1,e),a=n.data.list,l=n.data.total,i=Math.ceil(l/1e3);for(let o=2;o<=i;o++){let t=await V(1e3,o,e);a=a.concat(t.data.list)}return a.sort(((e,t)=>Number(t.id)-Number(e.id))),W=a,a}const Y=`${P}/https://ys.mihoyo.com/main/news/detail/`,Z=/src=\\"(.*?.mp4)\\"/;const ee=e({setup(e){const i=b(),o=C([]),u=C(1),s=C(1),p=C(!1);let m=[];const v=C("");function f(){document.title="原神视频列表"}if(S(f),j(f),0==m.length){(async()=>{try{const e=await X();for(const t of e)m.push({id:t.id,title:t.title,channelId:t.channelId,time:t.start_time,imgSrc:(e=>{let t="";return e.ext.forEach((e=>{var n;"banner"==e.arrtName&&(t=null==e||null===(n=e.value[0])||void 0===n?void 0:n.url)})),t})(t)});p.value=!0,o.value=m.slice(0,30),s.value=Math.ceil(m.length/30)||1}catch(e){i.error(String(e),{closable:!0,duration:0}),console.warn(e)}})();let e,t=[];$(u,(e=>{let n=0==t.length?m:t;o.value=n.slice(30*(e-1),30*e)})),$(v,(n=>{if(""==(n=n.trim()))return t=[],o.value=m.slice(0,30),void(s.value=Math.ceil(m.length/30)||1);e&&clearTimeout(e),n&&(e=setTimeout((()=>{n==v.value&&(t=m.filter((e=>-1!=e.title.indexOf(n))),o.value=t.slice(0,30),s.value=Math.ceil(t.length/30)||1,u.value=1)}),200))}))}return(e,i)=>(r(),t(h,null,[p.value?d("",!0):(r(),c(l(M),{key:0,text:"",repeat:10})),p.value?(r(),c(l(T),{key:1,vertical:""},{default:a((()=>[n(l(N),{size:"medium",round:"",placeholder:"搜索",clearable:"","on-update:value":e=>v.value=e},null,8,["on-update:value"]),n(l(I),{page:u.value,"onUpdate:page":i[0]||(i[0]=e=>u.value=e),"page-count":s.value,"show-quick-jumper":""},null,8,["page","page-count"]),n(K,{card:o.value},null,8,["card"]),n(l(I),{page:u.value,"onUpdate:page":i[1]||(i[1]=e=>u.value=e),"page-count":s.value,"show-quick-jumper":""},null,8,["page","page-count"])])),_:1})):d("",!0)],64))}}),te=k("返回列表"),ne=k("到米哈游官网查看"),ae=[{path:"/",component:ee,meta:{keepAlive:!0}},{path:"/info/:id",component:e({props:{id:null},setup(e){const i=e,o=b(),u=C(!1),s=C(null),p=C(!0);return q((async()=>{try{let t=(await X()).find((e=>e.id==i.id));t&&(document.title=t.title);let n=await async function(e){let t=await fetch(Y+e),n=await t.text(),a=Z.exec(n);if(null===a)return"";let l='"'+a[1]+'"';return JSON.parse(l)}(i.id);if(""==n)return p.value=!1,void(u.value=!0);s.value&&(e=s.value,new z({container:e,video:{url:n}})),p.value=!1}catch(t){o.error(String(t),{closable:!0,duration:0}),console.log(t),p.value=!1}var e})),(e,o)=>(r(),t(h,null,[A(_("div",{id:"dplayer",ref_key:"dplayer",ref:s},null,512),[[E,!p.value]]),A(n(l(M),{height:"50vh",width:"100%"},null,512),[[E,p.value]]),u.value?(r(),c(l(L),{key:0,status:"warning",title:"警告",description:"此 id 没有视频"},{footer:a((()=>[n(l(T),{justify:"center"},{default:a((()=>[n(l(w),{onClick:o[0]||(o[0]=e=>l(le).go(-1))},{default:a((()=>[te])),_:1}),n(l(w),{onClick:o[1]||(o[1]=e=>{return t="https://ys.mihoyo.com/main/news/detail/"+i.id,void window.open(t,"_blank","noreferrer=yes");var t})},{default:a((()=>[ne])),_:1})])),_:1})])),_:1})):d("",!0)],64))}}),props:e=>({id:e.params.id}),meta:{scrollToTop:!0}}],le=O({history:U(),scrollBehavior:(e,t,n)=>{if(n)return n;if(e.hash)return{el:e.hash,behavior:"smooth"};let a={left:0,top:0};return!!e.meta.scrollToTop&&(a.left=0,a.top=0,a)},routes:ae}),ie=B(R);ie.use(le),ie.mount("#app")}}}))}();
