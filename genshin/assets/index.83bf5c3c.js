import{d as b,c as $,a as h,w as m,u as c,N as U,n as N,o as v,R as J,b as _,r as D,e as k,K as W,f as Q,F as S,g as X,h as Y,i as w,t as F,j as A,k as Z,l as ee,m as x,p as O,q as g,s as te,v as ae,x as j,y as P,z as q,A as ne,B as I,C as se,D as R,E as T,G as re,H as oe,I as le,J as ue,L as ie}from"./vendor.bd7962d2.js";function De(){import("data:text/javascript,")}const ce=function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&e(n)}).observe(document,{childList:!0,subtree:!0});function s(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerpolicy&&(a.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?a.credentials="include":t.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function e(t){if(t.ep)return;t.ep=!0;const a=s(t);fetch(t.href,a)}};ce();const de="_container_451mx_2";var pe={container:de},z=(o,l)=>{const s=o.__vccOpts||o;for(const[e,t]of l)s[e]=t;return s};const fe=b({setup(o){return(l,s)=>(v(),$("div",{class:N(l.$style.container)},[h(c(U),null,{default:m(()=>[h(c(J),null,{default:m(({Component:e,route:t})=>[(v(),_(W,null,[t.meta.keepAlive?(v(),_(D(e),{key:0})):k("",!0)],1024)),t.meta.keepAlive?k("",!0):(v(),_(D(e),{key:0}))]),_:1})]),_:1})],2))}}),me={$style:pe};var he=z(fe,[["__cssModules",me]]);const ve="_column_1o6th_3",ge="_between_1o6th_13";var _e={column:ve,between:ge,"n-card":"_n-card_1o6th_27"};const ye=["src"],we=x("\u5B98\u7F51\u67E5\u770B"),ke=b({props:{card:null},setup(o){const l=o;function s(a){window.open(a,"_blank","noreferrer=yes")}function e(a){let n=[];for(let p of a)switch(p){case"11":n.push("\u65B0\u95FB");break;case"12":n.push("\u516C\u544A");break;case"258":n.push("\u6D3B\u52A8");break}return n}function t(a,n){document.title=n,L.push("/info/"+a)}return(a,n)=>(v(),_(c(X),{cols:"3","item-responsive":"",responsive:"screen","x-gap":12,"y-gap":8},{default:m(()=>[(v(!0),$(S,null,Q(l.card,({channelId:p,title:d,id:u,imgSrc:i,time:r})=>(v(),_(c(Y),{span:"3 m:1",key:u},{default:m(()=>[h(c(ee),{title:d,class:N(a.$style["n-card"]),onClick:f=>t(u,d)},{cover:m(()=>[w("img",{src:i||"https://ys.mihoyo.com/main/_nuxt/img/37207c1.jpg"},null,8,ye)]),default:m(()=>[w("div",{class:N(a.$style.between)},[w("div",{class:N(a.$style.column)},[w("span",null,F(e(p).join(" ")),1),w("span",null,F(r),1)],2),h(c(A),{onClick:Z(f=>s(`https://ys.mihoyo.com/main/news/detail/${u}`),["stop"])},{default:m(()=>[we]),_:2},1032,["onClick"])],2)]),_:2},1032,["title","class","onClick"])]),_:2},1024))),128))]),_:1}))}}),Ce={$style:_e};var Ne=z(ke,[["__cssModules",Ce]]);const G="https://quiet-disk-7a77.xmdhs.workers.dev",be=`${G}/https://ys.mihoyo.com/content/ysCn/getContentList?`;async function V(o,l,s="10"){let e=new URLSearchParams;e.append("pageSize",o.toString()),e.append("pageNum",l.toString()),e.append("channelId",s);let a=await(await fetch(be+e.toString())).json();if(a.retcode!==0)throw new Error(a.message);return a}let B=[];async function H(o="10",l=!1){if(!l&&B.length>0)return B;let s=await V(1e3,1,o),e=s.data.list,t=s.data.total,a=Math.ceil(t/1e3);for(let n=2;n<=a;n++){let p=await V(1e3,n,o);e=e.concat(p.data.list)}return e.sort((n,p)=>Number(p.id)-Number(n.id)),B=e,e}const $e=`${G}/https://ys.mihoyo.com/main/news/detail/`,Be=/src=\\"(.*?.mp4)\\"/;async function Ae(o){let s=await(await fetch($e+o)).text(),e=Be.exec(s);if(e===null)return"";let t='"'+e[1]+'"';return JSON.parse(t)}const Se=b({setup(o){const l=O(),s=g([]),e=g(1),t=g(1),a=g(!1);let n=[];const p=g("");function d(){document.title="\u539F\u795E\u89C6\u9891\u5217\u8868"}if(te(d),ae(d),n.length==0){(async()=>{try{const r=await H();for(const f of r)n.push({id:f.id,title:f.title,channelId:f.channelId,time:f.start_time,imgSrc:(y=>{let M="";return y.ext.forEach(C=>{var E;C.arrtName=="banner"&&(M=(E=C==null?void 0:C.value[0])==null?void 0:E.url)}),M})(f)});a.value=!0,s.value=n.slice(0,30),t.value=Math.ceil(n.length/30)||1}catch(r){l.error(String(r),{closable:!0,duration:0}),console.warn(r)}})();let u=[],i;j(e,r=>{let f=u.length==0?n:u;s.value=f.slice((r-1)*30,r*30)}),j(p,r=>{if(r=r.trim(),r==""){u=[],s.value=n.slice(0,30),t.value=Math.ceil(n.length/30)||1,e.value=1;return}i&&clearTimeout(i),r&&(i=setTimeout(()=>{if(r!=p.value)return;let f;try{f=new RegExp(r,"i")}catch(y){l.error(String(y),{closable:!0,duration:1500}),console.warn(y);return}u=n.filter(y=>f.test(y.title)),s.value=u.slice(0,30),t.value=Math.ceil(u.length/30)||1,e.value=1},200))})}return(u,i)=>(v(),$(S,null,[a.value?k("",!0):(v(),_(c(P),{key:0,text:"",repeat:10})),a.value?(v(),_(c(q),{key:1,vertical:""},{default:m(()=>[h(c(ne),{size:"medium",round:"",placeholder:"\u6B63\u5219\u641C\u7D22",clearable:"","on-update:value":r=>p.value=r},null,8,["on-update:value"]),h(c(I),{page:e.value,"onUpdate:page":i[0]||(i[0]=r=>e.value=r),"page-count":t.value,"show-quick-jumper":""},null,8,["page","page-count"]),h(Ne,{card:s.value},null,8,["card"]),h(c(I),{page:e.value,"onUpdate:page":i[1]||(i[1]=r=>e.value=r),"page-count":t.value,"show-quick-jumper":""},null,8,["page","page-count"])]),_:1})):k("",!0)],64))}}),xe=x("\u8FD4\u56DE\u5217\u8868"),Le=x("\u5230\u7C73\u54C8\u6E38\u5B98\u7F51\u67E5\u770B"),Me=b({props:{id:null},setup(o){const l=o,s=O(),e=g(!1),t=g(null),a=g(!0);function n(d){window.open(d,"_blank","noreferrer=yes")}se(async()=>{try{let u=(await H()).find(r=>r.id==l.id);u&&(document.title=u.title);let i=await Ae(l.id);if(i==""){a.value=!1,e.value=!0;return}t.value&&p(t.value,i),a.value=!1}catch(d){s.error(String(d),{closable:!0,duration:0}),console.log(d),a.value=!1}});function p(d,u){let i={container:d,video:{url:u}};return new oe(i)}return(d,u)=>(v(),$(S,null,[R(w("div",{id:"dplayer",ref_key:"dplayer",ref:t},null,512),[[T,!a.value]]),R(h(c(P),{height:"50vh",width:"100%"},null,512),[[T,a.value]]),e.value?(v(),_(c(re),{key:0,status:"warning",title:"\u8B66\u544A",description:"\u6B64 id \u6CA1\u6709\u89C6\u9891"},{footer:m(()=>[h(c(q),{justify:"center"},{default:m(()=>[h(c(A),{onClick:u[0]||(u[0]=i=>c(L).go(-1))},{default:m(()=>[xe]),_:1}),h(c(A),{onClick:u[1]||(u[1]=i=>n("https://ys.mihoyo.com/main/news/detail/"+l.id))},{default:m(()=>[Le]),_:1})]),_:1})]),_:1})):k("",!0)],64))}}),Ee=[{path:"/",component:Se,meta:{keepAlive:!0}},{path:"/info/:id",component:Me,props:o=>({id:o.params.id}),meta:{scrollToTop:!0}}],L=le({history:ue(),scrollBehavior:(o,l,s)=>{if(s)return s;if(o.hash)return{el:o.hash,behavior:"smooth"};let e={left:0,top:0};if(o.meta.scrollToTop)e.left=0,e.top=0;else return!1;return e},routes:Ee}),K=ie(he);K.use(L);K.mount("#app");export{De as __vite_legacy_guard};
