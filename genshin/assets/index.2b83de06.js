import{d as E,c as y,w as i,u as n,N as Z,a as L,o as m,b as d,e as ee,n as $,f as N,g as te,R as ae,K as se,r as V,h as b,i as ne,j as T,k as oe,F as x,l as re,m as le,t as K,p as A,q as ue,s as ie,v as D,x as U,y as w,z as ce,A as de,B as O,C as G,D as F,E as H,G as S,H as P,I as j,J as pe,L as fe,M as ve,O as J,P as me,Q as he,S as _e,T as ye}from"./vendor.4790b38f.js";function et(){import("data:text/javascript,")}const ge=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&e(s)}).observe(document,{childList:!0,subtree:!0});function o(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerpolicy&&(a.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?a.credentials="include":t.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function e(t){if(t.ep)return;t.ep=!0;const a=o(t);fetch(t.href,a)}};ge();const we="_container_1omqz_2",Ne="_headerText_1omqz_31",ke="_header_1omqz_31";var $e={container:we,headerText:Ne,header:ke},z=(u,r)=>{const o=u.__vccOpts||u;for(const[e,t]of r)o[e]=t;return o};const Ce=E({setup(u){const r=L();return(o,e)=>(m(),y(n(Z),null,{default:i(()=>[d(n(ne),null,{default:i(()=>[d(n(ee),{bordered:"",class:$(o.$style.header)},{default:i(()=>[N("strong",{class:$(o.$style.headerText),onClick:e[0]||(e[0]=t=>n(r).push("/"))},"\u539F\u795E\u5B98\u7F51\u65B0\u95FB\u5217\u8868",2)]),_:1},8,["class"]),d(n(te),{class:$(o.$style.container),"content-style":"padding: 24px;"},{default:i(()=>[d(n(ae),null,{default:i(({Component:t,route:a})=>[(m(),y(se,null,[a.meta.keepAlive?(m(),y(V(t),{key:0})):b("",!0)],1024)),a.meta.keepAlive?b("",!0):(m(),y(V(t),{key:0}))]),_:1})]),_:1},8,["class"])]),_:1})]),_:1}))}}),be={$style:$e};var De=z(Ce,[["__cssModules",be]]);const Ee="_column_1o6th_3",Be="_between_1o6th_13";var Fe={column:Ee,between:Be,"n-card":"_n-card_1o6th_27"};const Ae=["src"],Se=D("\u5B98\u7F51\u67E5\u770B"),Me=E({props:{card:null},setup(u){const r=u;function o(a){window.open(a,"_blank","noreferrer=yes")}function e(a){let s=[];for(let f of a)switch(f){case"11":s.push("\u65B0\u95FB");break;case"12":s.push("\u516C\u544A");break;case"258":s.push("\u6D3B\u52A8");break}return s}function t(a,s){document.title=s,X.push("/info/"+a)}return(a,s)=>(m(),y(n(re),{cols:"3","item-responsive":"",responsive:"screen","x-gap":12,"y-gap":8},{default:i(()=>[(m(!0),T(x,null,oe(r.card,({channelId:f,title:C,id:p,imgSrc:c,time:_})=>(m(),y(n(le),{span:"3 m:1",key:p},{default:i(()=>[d(n(ie),{title:C,class:$(a.$style["n-card"]),onClick:h=>t(p,C)},{cover:i(()=>[N("img",{src:c||"https://ys.mihoyo.com/main/_nuxt/img/37207c1.jpg"},null,8,Ae)]),default:i(()=>[N("div",{class:$(a.$style.between)},[N("div",{class:$(a.$style.column)},[N("span",null,K(e(f).join(" ")),1),N("span",null,K(_),1)],2),d(n(A),{onClick:ue(h=>o(`https://ys.mihoyo.com/main/news/detail/${p}`),["stop"])},{default:i(()=>[Se]),_:2},1032,["onClick"])],2)]),_:2},1032,["title","class","onClick"])]),_:2},1024))),128))]),_:1}))}}),Le={$style:Fe};var Te=z(Me,[["__cssModules",Le]]);const W="https://quiet-disk-7a77.xmdhs.workers.dev",xe=`${W}/https://ys.mihoyo.com/content/ysCn/getContentList?`;async function q(u,r,o="10"){let e=new URLSearchParams;e.append("pageSize",u.toString()),e.append("pageNum",r.toString()),e.append("channelId",o);let a=await(await fetch(xe+e.toString())).json();if(a.retcode!==0)throw new Error(a.message);return a}let M=[];async function Q(u="10",r=!1){if(!r&&M.length>0)return M;let o=await q(1e3,1,u),e=o.data.list,t=o.data.total,a=Math.ceil(t/1e3);for(let s=2;s<=a;s++){let f=await q(1e3,s,u);e=e.concat(f.data.list)}return e.sort((s,f)=>Number(f.id)-Number(s.id)),M=e,e}const ze=`${W}/https://ys.mihoyo.com/main/news/detail/`,Re=/src=\\"(.*?.mp4)\\"/;async function Ie(u){let o=await(await fetch(ze+u)).text(),e=Re.exec(o);if(e===null)return"";let t='"'+e[1]+'"';return JSON.parse(t)}const Ve="_warp_1k16d_3";var Ke={warp:Ve};const Oe=D("\u6570\u636E\u52A0\u8F7D\u4E2D"),Pe=N("span",null,"\u8DF3\u8F6C",-1),je=N("span",null,"\u8DF3\u8F6C",-1),qe=E({setup(u){const r=U(),o=w([]),e=w(1),t=w(1),a=w(!1);let s=[];const f=w(""),C=w();function p(){document.title="\u539F\u795E\u89C6\u9891\u5217\u8868"}ce(p),de(p);const c=w("");function _(){if(isNaN(Number(c.value))){c.value="";return}if(Number(c.value)>t.value){c.value="";return}e.value=Number(c.value),c.value=""}if(s.length==0){(async()=>{try{const l=await Q();for(const g of l)s.push({id:g.id,title:g.title,channelId:g.channelId,time:g.start_time,imgSrc:(k=>{let R="";return k.ext.forEach(B=>{var I;B.arrtName=="banner"&&(R=(I=B==null?void 0:B.value[0])==null?void 0:I.url)}),R})(g)});a.value=!0,o.value=s.slice(0,30),t.value=Math.ceil(s.length/30)||1}catch(l){r.error(String(l),{closable:!0,duration:0}),console.warn(l)}})();let h=[],v;O(e,l=>{var k;let g=h.length==0?s:h;o.value=g.slice((l-1)*30,l*30),(k=C.value)==null||k.scrollIntoView({behavior:"smooth"})}),O(f,l=>{if(l=l.trim(),l==""){h=[],o.value=s.slice(0,30),t.value=Math.ceil(s.length/30)||1,e.value=1;return}v&&clearTimeout(v),l&&(v=setTimeout(()=>{if(l!=f.value)return;let g;try{g=new RegExp(l,"i")}catch(k){r.error(String(k),{closable:!0,duration:1500}),console.warn(k);return}h=s.filter(k=>g.test(k.title)),o.value=h.slice(0,30),t.value=Math.ceil(h.length/30)||1,e.value=1},200))})}return(h,v)=>(m(),T(x,null,[a.value?b("",!0):(m(),y(n(G),{key:0},{description:i(()=>[Oe]),default:i(()=>[d(n(H),{text:"",repeat:10})]),_:1})),a.value?(m(),y(n(F),{key:1,vertical:""},{default:i(()=>[d(n(S),{size:"medium",round:"",placeholder:"\u6B63\u5219\u641C\u7D22",clearable:"",value:f.value,"onUpdate:value":v[0]||(v[0]=l=>f.value=l)},null,8,["value"]),N("div",{ref_key:"listTopRef",ref:C},null,512),d(n(F),{size:"small",align:"center"},{default:i(()=>[d(n(P),{page:e.value,"onUpdate:page":v[1]||(v[1]=l=>e.value=l),"page-count":t.value,class:$(h.$style.warp)},null,8,["page","page-count","class"]),Pe,d(n(S),{value:c.value,"onUpdate:value":v[2]||(v[2]=l=>c.value=l),onKeyup:j(_,["enter"]),placeholder:"",autosize:"",style:{"min-width":"2em"}},null,8,["value","onKeyup"])]),_:1}),d(Te,{card:o.value},null,8,["card"]),d(n(F),{size:"small",align:"center"},{default:i(()=>[d(n(P),{page:e.value,"onUpdate:page":v[3]||(v[3]=l=>e.value=l),"page-count":t.value,class:$(h.$style.warp)},null,8,["page","page-count","class"]),je,d(n(S),{value:c.value,"onUpdate:value":v[4]||(v[4]=l=>c.value=l),onKeyup:j(_,["enter"]),placeholder:"",autosize:"",style:{"min-width":"2em"}},null,8,["value","onKeyup"])]),_:1})]),_:1})):b("",!0)],64))}}),Ue={$style:Ke};var Ge=z(qe,[["__cssModules",Ue]]);const He=D("\u6570\u636E\u52A0\u8F7D\u4E2D"),Je=D("\u8FD4\u56DE\u5217\u8868"),We=D("\u5230\u7C73\u54C8\u6E38\u5B98\u7F51\u67E5\u770B"),Qe=E({props:{id:null},setup(u){const r=u,o=L(),e=U(),t=w(!1),a=w(null),s=w(!0);function f(p){window.open(p,"_blank","noreferrer=yes")}pe(async()=>{try{let c=(await Q()).find(h=>h.id==r.id);c&&(document.title=c.title);let _=await Ie(r.id);if(_==""){s.value=!1,t.value=!0;return}a.value&&C(a.value,_),s.value=!1}catch(p){e.error(String(p),{closable:!0,duration:0}),console.log(p),s.value=!1}});function C(p,c){let _={container:p,video:{url:c}};return new me(_)}return(p,c)=>(m(),T(x,null,[fe(N("div",{id:"dplayer",ref_key:"dplayer",ref:a},null,512),[[ve,!s.value]]),s.value?(m(),y(n(G),{key:0},{description:i(()=>[He]),default:i(()=>[d(n(H),{height:"30vh",width:"100%"})]),_:1})):b("",!0),t.value?(m(),y(n(J),{key:1,status:"warning",title:"\u8B66\u544A",description:"\u6B64 id \u6CA1\u6709\u89C6\u9891"},{footer:i(()=>[d(n(F),{justify:"center"},{default:i(()=>[d(n(A),{onClick:c[0]||(c[0]=_=>n(o).go(-1))},{default:i(()=>[Je]),_:1}),d(n(A),{onClick:c[1]||(c[1]=_=>f("https://ys.mihoyo.com/main/news/detail/"+r.id))},{default:i(()=>[We]),_:1})]),_:1})]),_:1})):b("",!0)],64))}}),Xe=D("\u8FD4\u56DE\u4E0A\u4E00\u9875"),Ye=E({setup(u){const r=L();return(o,e)=>(m(),y(n(J),{status:"404",title:"404 \u8D44\u6E90\u4E0D\u5B58\u5728",description:"\u5565\u90FD\u6CA1\u6709"},{footer:i(()=>[d(n(A),{onClick:e[0]||(e[0]=t=>n(r).back())},{default:i(()=>[Xe]),_:1})]),_:1}))}}),Ze=[{path:"/",component:Ge,meta:{keepAlive:!0}},{path:"/info/:id",component:Qe,props:u=>({id:u.params.id}),meta:{scrollToTop:!0}},{path:"/:pathMatch(.*)*",name:"NotFound",component:Ye,meta:{scrollToTop:!0}}],X=he({history:_e(),scrollBehavior:(u,r,o)=>{if(o)return o;if(u.hash)return{el:u.hash,behavior:"smooth"};let e={left:0,top:0};if(u.meta.scrollToTop)e.left=0,e.top=0;else return!1;return e},routes:Ze}),Y=ye(De);Y.use(X);Y.mount("#app");export{et as __vite_legacy_guard};
