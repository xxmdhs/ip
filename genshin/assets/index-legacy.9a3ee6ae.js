!function(){var e=document.createElement("style");e.innerHTML="._container_1omqz_2{width:100%;margin-right:auto;margin-left:auto}@media (min-width: 576px){._container_1omqz_2{max-width:510px;padding-right:0;padding-left:0}}@media (min-width: 768px){._container_1omqz_2{max-width:700px}}@media (min-width: 992px){._container_1omqz_2{max-width:920px}}@media (min-width: 1200px){._container_1omqz_2{max-width:1130px}}._headerText_1omqz_31{padding:1rem .5rem;font-size:20px;cursor:pointer}._header_1omqz_31{display:flex;justify-content:space-between;align-items:center;padding-right:1rem;padding-left:1rem}._column_1o6th_3{display:flex;flex-direction:column}._between_1o6th_13{display:flex;flex-direction:row;justify-content:space-between;align-items:flex-end}._n-card_1o6th_27{cursor:pointer;height:100%}\n",document.head.appendChild(e),System.register(["./vendor-legacy.68db9fdb.js"],(function(){"use strict";var e,t,a,n,l,o,i,r,u,s,c,d,p,m,h,v,_,f,y,g,w,x,k,b,z,T,C,S,q,N,$,M,j,I,U,E,K,A,L,R,O,B,F,H,J,P;return{setters:[function(D){e=D.d,t=D.c,a=D.w,n=D.u,l=D.N,o=D.a,i=D.o,r=D.b,u=D.e,s=D.n,c=D.f,d=D.g,p=D.R,m=D.K,h=D.r,v=D.h,_=D.i,f=D.j,y=D.k,g=D.F,w=D.l,x=D.m,k=D.t,b=D.p,z=D.q,T=D.s,C=D.v,S=D.x,q=D.y,N=D.z,$=D.A,M=D.B,j=D.C,I=D.D,U=D.E,E=D.G,K=D.H,A=D.I,L=D.J,R=D.L,O=D.M,B=D.O,F=D.P,H=D.Q,J=D.S,P=D.T}],execute:function(){var D={container:"_container_1omqz_2",headerText:"_headerText_1omqz_31",header:"_header_1omqz_31"},G=(e,t)=>{const a=e.__vccOpts||e;for(const[n,l]of t)a[n]=l;return a};const Q=e({setup(e){const f=o();return(e,o)=>(i(),t(n(l),null,{default:a((()=>[r(n(_),null,{default:a((()=>[r(n(u),{bordered:"",class:s(e.$style.header)},{default:a((()=>[c("strong",{class:s(e.$style.headerText),onClick:o[0]||(o[0]=e=>n(f).push("/"))},"原神官网新闻列表",2)])),_:1},8,["class"]),r(n(d),{class:s(e.$style.container),"content-style":"padding: 24px;"},{default:a((()=>[r(n(p),null,{default:a((({Component:e,route:a})=>[(i(),t(m,null,[a.meta.keepAlive?(i(),t(h(e),{key:0})):v("",!0)],1024)),a.meta.keepAlive?v("",!0):(i(),t(h(e),{key:0}))])),_:1})])),_:1},8,["class"])])),_:1})])),_:1}))}});var V=G(Q,[["__cssModules",{$style:D}]]);var W={column:"_column_1o6th_3",between:"_between_1o6th_13","n-card":"_n-card_1o6th_27"};const X=["src"],Y=C("官网查看");var Z=G(e({props:{card:null},setup(e){const l=e;function o(e){let t=[];for(let a of e)switch(a){case"11":t.push("新闻");break;case"12":t.push("公告");break;case"258":t.push("活动")}return t}return(e,u)=>(i(),t(n(w),{cols:"3","item-responsive":"",responsive:"screen","x-gap":12,"y-gap":8},{default:a((()=>[(i(!0),f(g,null,y(l.card,(({channelId:l,title:u,id:d,imgSrc:p,time:m})=>(i(),t(n(x),{span:"3 m:1",key:d},{default:a((()=>[r(n(T),{title:u,class:s(e.$style["n-card"]),onClick:e=>function(e,t){document.title=t,fe.push("/info/"+e)}(d,u)},{cover:a((()=>[c("img",{src:p||"https://ys.mihoyo.com/main/_nuxt/img/37207c1.jpg"},null,8,X)])),default:a((()=>[c("div",{class:s(e.$style.between)},[c("div",{class:s(e.$style.column)},[c("span",null,k(o(l).join(" ")),1),c("span",null,k(m),1)],2),r(n(b),{onClick:z((e=>{return t=`https://ys.mihoyo.com/main/news/detail/${d}`,void window.open(t,"_blank","noreferrer=yes");var t}),["stop"])},{default:a((()=>[Y])),_:2},1032,["onClick"])],2)])),_:2},1032,["title","class","onClick"])])),_:2},1024)))),128))])),_:1}))}}),[["__cssModules",{$style:W}]]);const ee="https://quiet-disk-7a77.xmdhs.workers.dev",te=`${ee}/https://ys.mihoyo.com/content/ysCn/getContentList?`;async function ae(e,t,a="10"){let n=new URLSearchParams;n.append("pageSize",e.toString()),n.append("pageNum",t.toString()),n.append("channelId",a);let l=await fetch(te+n.toString()),o=await l.json();if(0!==o.retcode)throw new Error(o.message);return o}let ne=[];async function le(e="10",t=!1){if(!t&&ne.length>0)return ne;let a=await ae(1e3,1,e),n=a.data.list,l=a.data.total,o=Math.ceil(l/1e3);for(let i=2;i<=o;i++){let t=await ae(1e3,i,e);n=n.concat(t.data.list)}return n.sort(((e,t)=>Number(t.id)-Number(e.id))),ne=n,n}const oe=`${ee}/https://ys.mihoyo.com/main/news/detail/`,ie=/src=\\"(.*?.mp4)\\"/;const re=C("数据加载中"),ue=c("span",null,"跳转",-1),se=c("span",null,"跳转",-1),ce=e({setup(e){const l=S(),o=q([]),u=q(1),s=q(1),d=q(!1);let p=[];const m=q(""),h=q();function _(){document.title="原神视频列表"}N(_),$(_);const y=q("");function w(){isNaN(Number(y.value))||Number(y.value)>s.value||(u.value=Number(y.value)),y.value=""}if(0==p.length){(async()=>{try{const e=await le();for(const t of e)p.push({id:t.id,title:t.title,channelId:t.channelId,time:t.start_time,imgSrc:(e=>{let t="";return e.ext.forEach((e=>{var a;"banner"==e.arrtName&&(t=null==e||null===(a=e.value[0])||void 0===a?void 0:a.url)})),t})(t)});d.value=!0,o.value=p.slice(0,30),s.value=Math.ceil(p.length/30)||1}catch(e){l.error(String(e),{closable:!0,duration:0}),console.warn(e)}})();let e,t=[];M(u,(e=>{var a;let n=0==t.length?p:t;o.value=n.slice(30*(e-1),30*e),null===(a=h.value)||void 0===a||a.scrollIntoView({behavior:"smooth"})})),M(m,(a=>{if(""==(a=a.trim()))return t=[],o.value=p.slice(0,30),s.value=Math.ceil(p.length/30)||1,void(u.value=1);e&&clearTimeout(e),a&&(e=setTimeout((()=>{if(a!=m.value)return;let e;try{e=new RegExp(a,"i")}catch(n){return l.error(String(n),{closable:!0,duration:1500}),void console.warn(n)}t=p.filter((t=>e.test(t.title))),o.value=t.slice(0,30),s.value=Math.ceil(t.length/30)||1,u.value=1}),200))}))}return(e,l)=>(i(),f(g,null,[d.value?v("",!0):(i(),t(n(j),{key:0},{description:a((()=>[re])),default:a((()=>[r(n(U),{text:"",repeat:10})])),_:1})),d.value?(i(),t(n(I),{key:1,vertical:""},{default:a((()=>[r(n(E),{size:"medium",round:"",placeholder:"正则搜索",clearable:"",value:m.value,"onUpdate:value":l[0]||(l[0]=e=>m.value=e)},null,8,["value"]),c("div",{ref_key:"listTopRef",ref:h},null,512),r(n(I),{size:"small",align:"center"},{default:a((()=>[r(n(K),{page:u.value,"onUpdate:page":l[1]||(l[1]=e=>u.value=e),"page-count":s.value},null,8,["page","page-count"]),ue,r(n(E),{value:y.value,"onUpdate:value":l[2]||(l[2]=e=>y.value=e),onKeyup:A(w,["enter"]),placeholder:"",autosize:"",style:{"min-width":"2em"}},null,8,["value","onKeyup"])])),_:1}),r(Z,{card:o.value},null,8,["card"]),r(n(I),{size:"small",align:"center"},{default:a((()=>[r(n(K),{page:u.value,"onUpdate:page":l[3]||(l[3]=e=>u.value=e),"page-count":s.value},null,8,["page","page-count"]),se,r(n(E),{value:y.value,"onUpdate:value":l[4]||(l[4]=e=>y.value=e),onKeyup:A(w,["enter"]),placeholder:"",autosize:"",style:{"min-width":"2em"}},null,8,["value","onKeyup"])])),_:1})])),_:1})):v("",!0)],64))}}),de=C("数据加载中"),pe=C("返回列表"),me=C("到米哈游官网查看"),he=e({props:{id:null},setup(e){const l=e,u=o(),s=S(),d=q(!1),p=q(null),m=q(!0);return L((async()=>{try{let t=(await le()).find((e=>e.id==l.id));t&&(document.title=t.title);let a=await async function(e){let t=await fetch(oe+e),a=await t.text(),n=ie.exec(a);if(null===n)return"";let l='"'+n[1]+'"';return JSON.parse(l)}(l.id);if(""==a)return m.value=!1,void(d.value=!0);p.value&&(e=p.value,new F({container:e,video:{url:a}})),m.value=!1}catch(t){s.error(String(t),{closable:!0,duration:0}),console.log(t),m.value=!1}var e})),(e,o)=>(i(),f(g,null,[R(c("div",{id:"dplayer",ref_key:"dplayer",ref:p},null,512),[[O,!m.value]]),m.value?(i(),t(n(j),{key:0},{description:a((()=>[de])),default:a((()=>[r(n(U),{height:"30vh",width:"100%"})])),_:1})):v("",!0),d.value?(i(),t(n(B),{key:1,status:"warning",title:"警告",description:"此 id 没有视频"},{footer:a((()=>[r(n(I),{justify:"center"},{default:a((()=>[r(n(b),{onClick:o[0]||(o[0]=e=>n(u).go(-1))},{default:a((()=>[pe])),_:1}),r(n(b),{onClick:o[1]||(o[1]=e=>{return t="https://ys.mihoyo.com/main/news/detail/"+l.id,void window.open(t,"_blank","noreferrer=yes");var t})},{default:a((()=>[me])),_:1})])),_:1})])),_:1})):v("",!0)],64))}}),ve=C("返回上一页"),_e=[{path:"/",component:ce,meta:{keepAlive:!0}},{path:"/info/:id",component:he,props:e=>({id:e.params.id}),meta:{scrollToTop:!0}},{path:"/:pathMatch(.*)*",name:"NotFound",component:e({setup(e){const l=o();return(e,o)=>(i(),t(n(B),{status:"404",title:"404 资源不存在",description:"啥都没有"},{footer:a((()=>[r(n(b),{onClick:o[0]||(o[0]=e=>n(l).back())},{default:a((()=>[ve])),_:1})])),_:1}))}}),meta:{scrollToTop:!0}}],fe=H({history:J(),scrollBehavior:(e,t,a)=>{if(a)return a;if(e.hash)return{el:e.hash,behavior:"smooth"};let n={left:0,top:0};return!!e.meta.scrollToTop&&(n.left=0,n.top=0,n)},routes:_e}),ye=P(V);ye.use(fe),ye.mount("#app")}}}))}();
